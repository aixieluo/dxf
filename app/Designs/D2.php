<?php

namespace App\Designs;

class D2 extends Design
{
    public function getWidth()
    {
        try {
            $l = collect($this->lengths);
            return $l->only(['l', 'w', 'd', 'c'])->max() + $l->get('h') * 2 + 30;
        } catch (\Exception $exception) {
            throw new \Exception('参数不正确');
        }
    }

    protected function getPoints()
    {
        try {
            $l = $this->lengths['l'];
            $w = $this->lengths['w'];
            $d = $this->lengths['d'];
            $c = $this->lengths['c'];
            $h = $this->lengths['h'];
        } catch (\Exception $exception) {
            throw new \Exception('参数不正确，无法生成');
        }
        if ($h * 2 + $w + 28 <= 147) {
            if (($h + 13 + 1 + $w + 2 + $h + 13) <= 147) {
                return [
                    [0, $h + 13],
                    [$h + 13, $h + 13],
                    [$h + 13, 0],
                    [$h + 15 + $l, 0],
                    [$h + 15 + $l, $h + 13],
                    [2 * $h + 28 + $l, $h + 13],
                    [2 * $h + 28 + $l, $h + $w + 15],
                    [2 * $h + 28 + $d, $h + $w + 15],
                    [2 * $h + 28 + $d, 2 * $h + $w + 28],
                    [2 * $h + 26, 2 * $h + $w + 28],
                    [2 * $h + 26, 2 * $h + $w + 29],
                    [2 * $h - $l + $d + 25, 2 * $h + $w + 29],
                    [2 * $h - $l + $d + 25, 2 * $h + $w + 31],
                    [2 * $h - $l + $d + 24, 2 * $h + $w + 31],
                    [2 * $h - $l + $d + 24, $h + $w + 15],
                    [2 * $h + 26, $h + $w + 15],
                    [2 * $h + 26, 2 * $h + $w + 28],
                    [2 * $h + 26, $h + $w + 15],
                    [$h + 13, $h + 15 + $w],
                    [$h + 13, $h + 15 + $c],
                    [$h + 13 + $l - $d + 1, $h + 15 + $c],
                    [0, $h + 15 + $c],
                    [0, $h + 13]
                ]; // 1
            } else {
                return [
                    [$l - $d + 2, 0],
                    [$l - $d + $l + 4, 0],
                    [$l - $d + $l + 4, $h + 13],
                    [$l - $d + $l + $h + 17, $h + 13],
                    [$l - $d + $l + $h + 17, $h + $w + 15],
                    [$l - $d + $l + 4, $h + $w + 15],
                    [$l - $d + $l + 4, 2 * $h + $w + 28],
                    [$l - $d + $h + 15, 2 * $h + $w + 28],
                    [$l - $d + $h + 15, $h + $w + 15],
                    [$l - $d + 2, $h + $w + 15],
                    [$l - $d + 2, 2 * $h + 31 + $c],
                    [$l - $d + 1, 2 * $h + 31 + $c],
                    [$l - $d + 1, 2 * $h + 29 + $c],
                    [0, 2 * $h + 29 + $c],
                    [0, $h + 15 + $c],
                    [2 * $l - 2 * $d + 3, $h + 15 + $c],
                    [$l - $d + 2, $h + 15 + $c],
                    [$l - $d + 2, 2 * $h + 31 + $c],
                    [$l - $d + 2, $h + 15 + $c],
                    [$l - $d - $h - 11, $h + 15 + $c],
                    [$l - $d - $h - 11, $h + 13],
                    [$l - $d + 2, $h + 13],
                    [$l - $d + 2, 0]
                ]; // 2
            }
        } else {
            if ($l + 2 * $h + 28 <= 147) {
                if (($l + 2 * $h + 30) <= 147) {
                    return [
                        [$h + $w + 13 - $c, $h + 16 + $l - $d],
                        [$h + $w + 13 - $c, 2],
                        [$h + $w + 15, 2],
                        [$h + $w + 15, $h + 15],
                        [2 * $h + $w + 28, $h + 15],
                        [2 * $h + 28 + $w, $h + 17 + $l],
                        [$h + 15 + $w, $h + 17 + $l],
                        [$h + 15 + $w, 2 * $h + 30 + $l],
                        [$h + 13, 2 * $h + 30 + $l],
                        [$h + 13, $h + 17 + $l],
                        [0, $h + 17 + $l],
                        [0, $h + $l - $d + 15],
                        [$h + 13, $h + $l - $d + 15],
                        [$h + 13, $l - $d + 2],
                        [$h + $w + 13 - $c, $l - $d + 2],
                        [$w - $c - 1, $l - $d + 2],
                        [$w - $c - 1, 1],
                        [$w - $c - 3, 1],
                        [$w - $c - 3, 0],
                        [$h + $w + 13 - $c, 0],
                        [$h + $w + 13 - $c, 2]
                    ]; // 3
                } else {
                    return [
                        [$h + $w + 13 - $c, $h + 14 + $l - $d],
                        [$h + $w + 13 - $c, 0],
                        [$h + $w + 15, 0],
                        [$h + $w + 15, $h + 13],
                        [2 * $h + $w + 28, $h + 13],
                        [2 * $h + 28 + $w, $h + 15 + $l],
                        [$h + 15 + $w, $h + 15 + $l],
                        [$h + 15 + $w, 2 * $h + 28 + $l],
                        [$h + 13, 2 * $h + 28 + $l],
                        [$h + 13, $h + 15 + $l],
                        [0, $h + 15 + $l],
                        [0, $h + $l - $d + 13],
                        [$h + 13, $h + $l - $d + 13],
                        [-1, $h + $l - $d + 13],
                        [-1, $h + 13],
                        [-3, $h + 13],
                        [-3, $h + 11],
                        [$h + 13, $h + 11],
                        [$h + 13, $h + 11],
                        [$h + 13, $l - $d + $h + 13],
                        [$h + 13, $l - $d],
                        [$h + $w + 13 - $c, $l - $d]
                    ]; // 4
                }
            } elseif ($l + 2 * $h + 28 > 147) {
                if ($l + $h + 17 <= 147) {
                    if ((($l - $d + 2) + ($c + 2)) <= 147) {
                        return [
                            [0, $h + 13],
                            [$h + 13, $h + 13],
                            [$h + 13, 0],
                            [$h + $w + 15, 0],
                            [$h + $w + 15, $h + 13],
                            [$h * 2 + $w + 28, $h + 13],
                            [$h * 2 + $w + 28, 0],
                            [$h * 3 + $w + 42, 0],
                            [$h * 3 + $w + 42, $c + 1],
                            [$h * 3 + $w + 43, $c + 1],
                            [$h * 3 + $w + 43, $c + 2],
                            [$h * 2 + $w + 28, $c + 2],
                            [$h * 3 + $w + 42, $c + 2],
                            [$h * 3 + $w + 42, $c + $l - $d + 3],
                            [
                                $h * 3 + $w + 44,
                                $c + $l - $d + 3
                            ],
                            [$h * 3 + $w + 44, $c + $l - $d + 4],
                            [$h * 2 + $w + 28, $c + $l - $d + 4],
                            [$h * 2 + $w + 28, 0],
                            [$h * 2 + $w + 28, $h + $d + 15],
                            [$h + $w + 15, $h + $d + 15],
                            [$h + $w + 15, $h * 2 + $d + 28],
                            [$c + $h + 15, $h * 2 + $d + 28],
                            [$h + $c + 15, $h + $d + 15],
                            [$h + $c + 15, $h + $l + 16],
                            [$h + 14, $h + $l + 16],
                            [$h + 14, $h + $l + 17],
                            [$h + 13, $h + $l + 17],
                            [$h + 13, $h + $l + 15],
                            [0, $h + $l + 15],
                            [0, $h + 13]
                        ]; // 5
                    } else {
                        return [
                            [0, $h + 13],
                            [$h + 13, $h + 13],
                            [$h + 13, 0],
                            [$h + $w + 15, 0],
                            [$h + $w + 15, $h + 13],
                            [$h * 2 + $w + 28, $h + 13],
                            [$h * 2 + $w + 28, 0],
                            [$h * 3 + $w + 42, 0],
                            [$h * 3 + $w + 42, $c + 1],
                            [$h * 3 + $w + 43, $c + 1],
                            [$h * 3 + $w + 43, $c + 2],
                            [$h * 3 + $w + 43, 0],
                            [$h * 4 + $w + 57, 0],
                            [$h * 4 + $w + 57, $l - $d + 1],
                            [$h * 4 + $w + 59, $l - $d + 1],
                            [$h * 4 + $w + 59, $l - $d + 2],
                            [$h * 3 + $w + 43, $l - $d + 2],
                            [$h * 3 + $w + 43, $c + 2],
                            [$h * 2 + $w + 28, $c + 2],
                            [$h * 2 + $w + 28, $h + $d + 15],
                            [$h * 2 + $w + 28, 0],
                            [$h * 2 + $w + 28, $h + $d + 15],
                            [$h + $w + 15, $h + $d + 15],
                            [$h + $w + 15, $h * 2 + $d + 28],
                            [$c + $h + 15, $h * 2 + $d + 28],
                            [$h + $c + 15, $h + $d + 15],
                            [$h + $c + 15, $h + $l + 16],
                            [$h + 14, $h + $l + 16],
                            [$h + 14, $h + $l + 17],
                            [$h + 13, $h + $l + 17],
                            [$h + 13, $h + $l + 15],
                            [0, $h + $l + 15],
                            [0, $h + 13]
                        ]; // 6
                    }
                } elseif ($l + $h + 17 > 147 && $l + 5 <= 147) {
                    if ((($l - $d + 2) + ($c + 2)) <= 147 && $w + 2 <= 147) {
                        return [
                            [$h + 13, 2],
                            [$h + 13, 1],
                            [$h + $w + 14, 1],
                            [$h + $w + 14, 0],
                            [$h + $w + 15, 0],
                            [$h + $w + 15, 2],
                            [2 * $h + $w + 28, 2],
                            [2 * $h + $w + 28, 0],
                            [4 * $h + $w + 59, 0],
                            [4 * $h + $w + 59, 1],
                            [4 * $h + $w + 57, 1],
                            [4 * $h + $w + 57, $l - $d + 2],
                            [3 * $h + $w + 43, $l - $d + 2],
                            [4 * $h + $w + 58, $l - $d + 2],
                            [4 * $h + $w + 58, $l - $d + 3],
                            [4 * $h + $w + 57, $l - $d + 3],
                            [4 * $h + $w + 57, $l - $d + 4 + $c],
                            [3 * $h + $w + 43, $l - $d + 4 + $c],
                            [3 * $h + $w + 43, 0],
                            [3 * $h + $w + 42, 0],
                            [3 * $h + $w + 42, $w + 1],
                            [3 * $h + $w + 43, $w + 1],
                            [3 * $h + $w + 43, $w + 2],
                            [2 * $h + $w + 28, $w + 2],
                            [2 * $h + $w + 28, 2],
                            [2 * $h + $w + 28, $d + 4],
                            [$h + $w + 15, $d + 4],
                            [$h + $w + 15, $d + $h + 17],
                            [$h + $c + 15, $d + $h + 17],
                            [$h + $c + 15, $d + 4],
                            [$h + $c + 15, $l + 5],
                            [$h + 14, $l + 5],
                            [$h + 14, $l + 6],
                            [$h + 13, $l + 6],
                            [$h + 13, $l + 4],
                            [0, $l + 4],
                            [0, 2],
                            [$h + 13, 2]
                        ]; // 7
                    } elseif ((($l - $d + 2) + ($c + 2)) <= 147 && $w + 2 > 147) {
                        return [
                            [$h + 13, 2],
                            [$h + 13, 1],
                            [$h + $w + 14, 1],
                            [$h + $w + 14, 0],
                            [$h + $w + 15, 0],
                            [$h + $w + 15, 2],
                            [2 * $h + $w + 28, 2],
                            [2 * $h + $w + 28, 0],
                            [3 * $h + $w + 44, 0],
                            [3 * $h + $w + 44, 1],
                            [3 * $h + $w + 42, 1],
                            [3 * $h + $w + 42, $l - $d + 2],
                            [2 * $h + $w + 28, $l - $d + 2],
                            [2 * $h + $w + 28, 2],
                            [2 * $h + $w + 28, $l - $d + 4 + $c],
                            [
                                3 * $h + $w + 42,
                                $l - $d + 4 + $c
                            ],
                            [3 * $h + $w + 42, $l - $d + 3],
                            [3 * $h + $w + 43, $l - $d + 3],
                            [3 * $h + $w + 43, $l - $d + 2],
                            [3 * $h + $w + 42, $l - $d + 2],
                            [3 * $h + $w + 42, 1],
                            [3 * $h + $w + 44, 1],
                            [3 * $h + $w + 44, 0],
                            [3 * $h + 2 * $w + 46, 0],
                            [3 * $h + 2 * $w + 46, $h + 15],
                            [3 * $h + 2 * $w + 45, $h + 15],
                            [3 * $h + 2 * $w + 45, $h + 14],
                            [3 * $h + $w + 44, $h + 14],
                            [3 * $h + $w + 44, 1],
                            [3 * $h + $w + 42, 1],
                            [3 * $h + $w + 42, $l - $d + 4 + $c],
                            [2 * $h + $w + 28, $l - $d + 4 + $c],
                            [2 * $h + $w + 28, 2],
                            [2 * $h + $w + 28, $d + 4],
                            [$h + $w + 15, $d + 4],
                            [$h + $w + 15, $d + $h + 17],
                            [$h + $c + 15, $d + $h + 17],
                            [$h + $c + 15, $d + 4],
                            [$h + $c + 15, $l + 5],
                            [$h + 14, $l + 5],
                            [$h + 14, $l + 6],
                            [$h + 13, $l + 6],
                            [$h + 13, $l + 4],
                            [0, $l + 4],
                            [0, 2],
                            [$h + 13, 2]
                        ]; // 8
                    } elseif ((($l - $d + 2) + ($c + 2)) > 147 && $w + 2 <= 147) {
                        return [
                            [$h + 13, 2],
                            [$h + 13, 1],
                            [$h + $w + 14, 1],
                            [$h + $w + 14, 0],
                            [$h + $w + 15, 0],
                            [$h + $w + 15, 2],
                            [2 * $h + $w + 28, 2],
                            [2 * $h + $w + 28, 0],
                            [4 * $h + $w + 60 + $l - $d, 0],
                            [4 * $h + $w + 60 + $l - $d, $h + 16],
                            [4 * $h + $w + 59 + $l - $d, $h + 16],
                            [4 * $h + $w + 59 + $l - $d, $h + 14],
                            [4 * $h + $w + 58, $h + 14],
                            [4 * $h + $w + 58, 0],
                            [4 * $h + $w + 58, 1],
                            [4 * $h + $w + 57, 1],
                            [4 * $h + $w + 57, $c + 2],
                            [3 * $h + $w + 43, $c + 2],
                            [3 * $h + $w + 43, 0],
                            [3 * $h + $w + 42, 0],
                            [3 * $h + $w + 42, $w + 1],
                            [3 * $h + $w + 43, $w + 1],
                            [3 * $h + $w + 43, $w + 2],
                            [2 * $h + $w + 28, $w + 2],
                            [2 * $h + $w + 28, 2],
                            [2 * $h + $w + 28, $d + 4],
                            [$h + $w + 15, $d + 4],
                            [$h + $w + 15, $d + $h + 17],
                            [$h + $c + 15, $d + $h + 17],
                            [$h + $c + 15, $d + 4],
                            [$h + $c + 15, $l + 5],
                            [$h + 14, $l + 5],
                            [$h + 14, $l + 6],
                            [$h + 13, $l + 6],
                            [$h + 13, $l + 4],
                            [0, $l + 4],
                            [0, 2],
                            [$h + 13, 2]
                        ]; // 9
                    } elseif ((($l - $d + 2) + ($c + 2)) > 147 && $w + 2 > 147) {
                        return [
                            [$h + 13, 2],
                            [$h + 13, 1],
                            [$h + $w + 14, 1],
                            [$h + $w + 14, 0],
                            [$h + $w + 15, 0],
                            [$h + $w + 15, 2],
                            [2 * $h + $w + 28, 2],
                            [2 * $h + $w + 28, 0],
                            [4 * $h + 2 * $w + 60, 0],
                            [4 * $h + 2 * $w + 60, $h + 15],
                            [4 * $h + 2 * $w + 59, $h + 15],
                            [4 * $h + 2 * $w + 59, $h + 14],
                            [4 * $h + $w + 58, $h + 14],
                            [4 * $h + $w + 58, 0],
                            [4 * $h + $w + 58, 1],
                            [4 * $h + $w + 56, 1],
                            [4 * $h + $w + 56, $l - $d + 2],
                            [3 * $h + $w + 43, $l - $d + 2],
                            [3 * $h + $w + 43, 0],
                            [3 * $h + $w + 43, 1],
                            [3 * $h + $w + 42, 1],
                            [3 * $h + $w + 42, $c + 2],
                            [2 * $h + $w + 28, $c + 2],
                            [2 * $h + $w + 28, 2],
                            [2 * $h + $w + 28, $d + 4],
                            [$h + $w + 15, $d + 4],
                            [$h + $w + 15, $d + $h + 17],
                            [$h + $c + 15, $d + $h + 17],
                            [$h + $c + 15, $d + 4],
                            [$h + $c + 15, $l + 5],
                            [$h + 14, $l + 5],
                            [$h + 14, $l + 6],
                            [$h + 13, $l + 6],
                            [$h + 13, $l + 4],
                            [0, $l + 4],
                            [0, 2],
                            [$h + 13, 2]
                        ]; // 10
                    }
                } elseif ($l + $h + 26 + 2 > 147 && $l + 2 > 147) {

                }
            }
        }
        throw new \Exception('你提供的尺寸暂时无法定做！');
    }
}
