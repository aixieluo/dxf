<?php

namespace App\Designs;

class D1 extends Design
{
    public function getWidth()
    {
        try {
            $l = collect($this->lengths);
            return $l->only(['l', 'w', 'd', 'c'])->max() + $l->get('h') * 2 + 30;
        } catch (\Exception $exception) {
            throw new \Exception('参数不正确');
        }
    }

    protected function getPoints()
    {
        try {
            $l = $this->lengths['l'];
            $w = $this->lengths['w'];
            $d = $this->lengths['d'];
            $c = $this->lengths['c'];
            $h = $this->lengths['h'];
        } catch (\Exception $exception) {
            throw new \Exception('参数不正确，无法生成');
        }
        if ($h * 2 + $w + 28 <= 147) {
            if (($h + 13 + 1 + $w + 2 + $h + 13) <= 147) {
                // p1
                return [
                    [$h + 13, 0],
                    [$h + 15 + $l, 0],
                    [$h + 15 + $l, $h + 13],
                    [2 * $h + 28 + $l, $h + 13],
                    [2 * $h + 28 + $l, $h + $c + 15],
                    [$h + 15 + $l, $h + $c + 15],
                    [$h + 14 + $d, $h + $c + 15],
                    [$h + 15 + $l, $h + $c + 15],
                    [$h + 15 + $l, $h + $w + 15],
                    [$h + $l + 16, $h + $w + 15],
                    [$h + $l + 16, $h + $l + $w - $d + 16],
                    [$h + $l + 18, $h + $w + $l - $d + 16],
                    [$h + $l + 18, $h + $w + $l - $d + 17],
                    [$l + 2, $h + $w + $l - $d + 17],
                    [$l + 2, 2 * $h + $w + 28],
                    [$l + 2, $h + $w + 15],
                    [$h + $l + 15, $h + $w + 15],
                    [$l + 2, $h + $w + 15],
                    [$l + 2, 2 * $h + $w + 28],
                    [$h + 13, 2 * $h + $w + 28],
                    [$h + 13, $h + $w + 15],
                    [0, $h + $w + 15],
                    [0, $h + 13],
                    [$h + 13, $h + 13],
                    [$h + 13, 0]
                ];
            } else {
                // p2
                return [
                    [$h + 13, 0],
                    [$h + 15 + $l, 0],
                    [$h + 15 + $l, $h + 13],
                    [2 * $h + 28 + $l, $h + 13],
                    [2 * $h + 28 + $l, $h + $c + 15],
                    [$h + 15 + $l, $h + $c + 15],
                    [$h + 14 + $d, $h + $c + 15],
                    [$h + 15 + $l, $h + $c + 15],
                    [2 * $h + $l + 29, $h + $c + 15],
                    [2 * $h + $l + 29, $h + $l + $c - $d + 16],
                    [2 * $h + $l + 31, $h + $l + $c - $d + 16],
                    [2 * $h + $l + 31, $h + $c - $d + $l + 17],
                    [$h + $l + 15, $h + $c + $l - $d + 17],
                    [$h + 15 + $l, $h + $c + 15],
                    [$h + 15 + $l, $h + $w + 15],
                    [$l + 2, $h + $w + 15],
                    [$l + 2, 2 * $h + $w + 28],
                    [$h + 13, 2 * $h + $w + 28],
                    [$h + 13, $h + $w + 15],
                    [0, $h + $w + 15],
                    [0, $h + 13],
                    [$h + 13, $h + 13],
                    [$h + 13, 0]
                ];
            }
        } else {
            if ($l + 2 * $h + 28 <= 147) {
                if (($l + 2 * $h + 30) <= 147) {
                    // p3
                    return [
                        [0, $h + 13],
                        [$h + 13, $h + 13],
                        [$h + 13, 0],
                        [$h + 15 + $c, 0],
                        [$h + 15 + $c, $h + $l - $d + 14],
                        [$h + 15 + $c, $l - $d - $h - 14],
                        [$h + 15 + $c, $l - $d],
                        [$h + 15 + $c, -2],
                        [2 * $h + 31 + $c, -2],
                        [2 * $h + 31 + $c, -1],
                        [2 * $h + 29 + $c, -1],
                        [2 * $h + 29 + $c, $l - $d],
                        [$h + $c + 15, $l - $d],
                        [$h + $w + 15, $l - $d],
                        [$h + $w + 15, $h + 13 + $l - $d],
                        [2 * $h + $w + 28, $h + 13 + $l - $d],
                        [2 * $h + 28 + $w, $h + 15 + $l],
                        [$h + 15 + $w, $h + 15 + $l],
                        [$h + 15 + $w, 2 * $h + 28 + $l],
                        [$h + 13, 2 * $h + 28 + $l],
                        [$h + 13, $h + 15 + $l],
                        [0, $h + 15 + $l],
                        [0, $h + 13]
                    ];
                } else {
                    // p4
                    return [
                        [0, $h + 13],
                        [$h + 13, $h + 13],
                        [$h + 13, 0],
                        [$h + 15 + $c, 0],
                        [$h + 15 + $c, $h + $l - $d + 14],
                        [$h + 15 + $c, $l - $d],
                        [$h + $w + 15, $l - $d],
                        [$h + $w + 15, $h + 13 + $l - $d],
                        [$h + $w + 15, $h + 11],
                        [2 * $h + $w + 31, $h + 11],
                        [2 * $h + $w + 31, $h + 12],
                        [2 * $h + $w + 29, $h + 12],
                        [2 * $h + $w + 29, $l + $h - $d + 13],
                        [$h + $w + 15, $h + 13 + $l - $d],
                        [2 * $h + $w + 28, $h + 13 + $l - $d],
                        [2 * $h + 28 + $w, $h + 15 + $l],
                        [$h + 15 + $w, $h + 15 + $l],
                        [$h + 15 + $w, 2 * $h + 28 + $l],
                        [$h + 13, 2 * $h + 28 + $l],
                        [$h + 13, $h + 15 + $l],
                        [0, $h + 15 + $l],
                        [0, $h + 13]
                    ];
                }
            } elseif ($l + 2 * $h + 28 > 147) {
                if ($l + $h + 17 <= 147) {
                    if ((($l - $d + 2) + ($c + 2)) <= 147) {
                        // p5
                        return [
                            [0, $h + 13],
                            [$h + 13, $h + 13],
                            [$h + 13, 0],
                            [$h + $w + 15, 0],
                            [$h + $w + 15, $h + 13],
                            [$h * 2 + $w + 28, $h + 13],
                            [$h * 2 + $w + 28, $h + $l + 15],
                            [$h * 2 + $w + 28, 0],
                            [$h * 3 + $w + 42, 0],
                            [$h * 3 + $w + 42, $c + 1],
                            [$h * 3 + $w + 43, $c + 1],
                            [$h * 3 + $w + 43, $c + 2],
                            [$h * 2 + $w + 28, $c + 2],
                            [$h * 3 + $w + 42, $c + 2],
                            [$h * 3 + $w + 42, $c + $l - $d + 3],
                            [$h * 3 + $w + 44, $c + $l - $d + 3],
                            [$h * 3 + $w + 44, $c + $l - $d + 4],
                            [$h * 2 + $w + 28, $c + $l - $d + 4],
                            [$h * 2 + $w + 28, $h + $l + 15],
                            [$h + $w + 15, $h + $l + 15],
                            [$h + $w + 15, $h + $l + 17],
                            [$h + $w + 14, $h + $l + 17],
                            [$h + $w + 14, $h + $l + 16],
                            [$h + $w + 13 - $c, $h + $l + 16],
                            [$h + $w + 13 - $c, $h + $d + 15],
                            [$h + $w + 13 - $c, $h * 2 + $d + 28],
                            [$h + 13, $h * 2 + $d + 28],
                            [$h + 13, $h + $d + 15],
                            [0, $h + $d + 15],
                            [0, $h + 13]
                        ];
                    } else {
                        // p6
                        return [
                            [0, $h + 13],
                            [$h + 13, $h + 13],
                            [$h + 13, 0],
                            [$h + $w + 15, 0],
                            [$h + $w + 15, $h + 13],
                            [$h * 2 + $w + 28, $h + 13],
                            [$h * 2 + $w + 28, $h + $l + 15],
                            [$h * 2 + $w + 28, 0],
                            [$h * 3 + $w + 42, 0],
                            [$h * 3 + $w + 42, $c + 1],
                            [$h * 3 + $w + 43, $c + 1],
                            [$h * 3 + $w + 43, $c + 2],
                            [$h * 3 + $w + 43, 0],
                            [4 * $h + 57 + $w, 0],
                            [4 * $h + 57 + $w, $l - $d + 1],
                            [4 * $h + 59 + $w, $l - $d + 1],
                            [4 * $h + 59 + $w, $l - $d + 2],
                            [3 * $h + 43 + $w, $l - $d + 2],
                            [$h * 3 + $w + 43, $c + 2],
                            [$h * 2 + $w + 28, $c + 2],
                            [$h * 2 + $w + 28, $h + $l + 15],
                            [$h + $w + 15, $h + $l + 15],
                            [$h + $w + 15, $h + $l + 17],
                            [$h + $w + 14, $h + $l + 17],
                            [$h + $w + 14, $h + $l + 16],
                            [$h + $w + 13 - $c, $h + $l + 16],
                            [$h + $w + 13 - $c, $h + $d + 15],
                            [$h + $w + 13 - $c, $h * 2 + $d + 28],
                            [$h + 13, $h * 2 + $d + 28],
                            [$h + 13, $h + $d + 15],
                            [0, $h + $d + 15],
                            [0, $h + 13]
                        ];
                    }
                } elseif ($l + $h + 17 > 147 && $l + 5 <= 147) {
                    if ((($l - $d + 2) + ($c + 2)) <= 147 && $w + 2 <= 147) {
                        // p7
                        return [
                            [$h + 13, 2],
                            [$h + 13, 0],
                            [$h + 14, 0],
                            [$h + 14, 1],
                            [$h + $w + 15, 1],
                            [$h + $w + 15, 2],
                            [$h * 2 + $w + 28, 2],
                            [2 * $h + 28 + $w, 0],
                            [3 * $h + 42 + $w, 0],
                            [4 * $h + 57 + $w, 0],
                            [4 * $h + 57 + $w, $c + 1],
                            [4 * $h + 58 + $w, $c + 1],
                            [4 * $h + 58 + $w, $c + 2],
                            [4 * $h + 57 + $w, $c + 2],
                            [3 * $h + 43 + $w, $c + 2],
                            [4 * $h + 57 + $w, $c + 2],
                            [4 * $h + 57 + $w, $c + $l - $d + 3],
                            [4 * $h + 59 + $w, $c + $l - $d + 3],
                            [4 * $h + 59 + $w, $c + $l - $d + 4],
                            [3 * $h + 43 + $w, $c + $l - $d + 4],
                            [3 * $h + 43 + $w, 0],
                            [3 * $h + 42 + $w, 0],
                            [3 * $h + 42 + $w, $w + 1],
                            [3 * $h + 43 + $w, $w + 1],
                            [3 * $h + 43 + $w, $w + 2],
                            [2 * $h + 28 + $w, $w + 2],
                            [2 * $h + 28 + $w, 0],
                            [$h * 2 + $w + 28, $l + 4],
                            [$h + $w + 15, $l + 4],
                            [$h + $w + 15, $l + 6],
                            [$h + $w + 14, $l + 6],
                            [$h + $w + 14, $l + 5],
                            [$h + $w - $c + 13, $l + 5],
                            [$h + $w - $c + 13, $d + 4],
                            [$h + $w - $c + 13, $d + $h + 17],
                            [$h + 13, $d + $h + 17],
                            [$h + 13, $d + 4],
                            [0, $d + 4],
                            [0, 2],
                            [$h + 13, 2]
                        ];
                    } elseif ((($l - $d + 2) + ($c + 2)) <= 147 && $w + 2 > 147) {
                        // p8
                        return [
                            [$h + 13, 2],
                            [$h + 13, 0],
                            [$h + 14, 0],
                            [$h + 14, 1],
                            [$h + $w + 15, 1],
                            [$h + $w + 15, 2],
                            [$h * 2 + $w + 28, 2],
                            [2 * $h + 28 + $w, 0],
                            [3 * $h + 42 + $w, 0],
                            [3 * $h + 46 + 2 * $w, 0],
                            [3 * $h + 46 + 2 * $w, $h + 14],
                            [3 * $h + 45 + $w, $h + 14],
                            [3 * $h + 45 + $w, $h + 15],
                            [3 * $h + 44 + $w, $h + 15],
                            [3 * $h + 44 + $w, 0],
                            [3 * $h + 42 + $w, 0],
                            [3 * $h + 42 + $w, $h + 15],
                            [3 * $h + 42 + $w, $c + 1],
                            [3 * $h + 43 + $w, $c + 1],
                            [3 * $h + 43 + $w, $c + 2],
                            [3 * $h + 42 + $w, $c + 2],
                            [2 * $h + 28 + $w, $c + 2],
                            [3 * $h + 42 + $w, $c + 2],
                            [3 * $h + 42 + $w, $c + $l - $d + 3],
                            [3 * $h + 44 + $w, $c + $l - $d + 3],
                            [3 * $h + 44 + $w, $c + $l - $d + 4],
                            [2 * $h + 28 + $w, $c + $l - $d + 4],
                            [2 * $h + 28 + $w, $c + 2],
                            [2 * $h + 28 + $w, 2],
                            [$h * 2 + $w + 28, $l + 4],
                            [$h + $w + 15, $l + 4],
                            [$h + $w + 15, $l + 6],
                            [$h + $w + 14, $l + 6],
                            [$h + $w + 14, $l + 5],
                            [$h + $w - $c + 13, $l + 5],
                            [$h + $w - $c + 13, $d + 4],
                            [$h + $w - $c + 13, $d + $h + 17],
                            [$h + 13, $d + $h + 17],
                            [$h + 13, $d + 4],
                            [0, $d + 4],
                            [0, 2],
                            [$h + 13, 2]
                        ];
                    } elseif ((($l - $d + 2) + ($c + 2)) > 147 && $w + 2 <= 147) {
                        // p9
                        return [
                            [$h + 13, 2],
                            [$h + 13, 0],
                            [$h + 14, 0],
                            [$h + 14, 1],
                            [$h + $w + 15, 1],
                            [$h + $w + 15, 2],
                            [$h * 2 + $w + 28, 2],
                            [2 * $h + 28 + $w, 0],
                            [3 * $h + 42 + $w, 0],
                            [4 * $h + 57 + $w, 0],
                            [5 * $h + 71 + $w, 0],
                            [5 * $h + 71 + $w, $l - $d + 1],
                            [5 * $h + 73 + $w, $l - $d + 1],
                            [5 * $h + 73 + $w, $l - $d + 2],
                            [4 * $h + 57 + $w, $l - $d + 2],
                            [4 * $h + 57 + $w, 0],
                            [4 * $h + 56 + $w, 0],
                            [4 * $h + 56 + $w, $c + 1],
                            [4 * $h + 57 + $w, $c + 1],
                            [4 * $h + 57 + $w, $c + 2],
                            [3 * $h + 43 + $w, $c + 2],
                            [3 * $h + 43 + $w, 0],
                            [3 * $h + 42 + $w, 0],
                            [3 * $h + 42 + $w, $w + 1],
                            [3 * $h + 43 + $w, $w + 1],
                            [3 * $h + 43 + $w, $w + 2],
                            [2 * $h + 28 + $w, $w + 2],
                            [2 * $h + 28 + $w, 2],
                            [$h * 2 + $w + 28, $l + 4],
                            [$h + $w + 15, $l + 4],
                            [$h + $w + 15, $l + 6],
                            [$h + $w + 14, $l + 6],
                            [$h + $w + 14, $l + 5],
                            [$h + $w - $c + 13, $l + 5],
                            [$h + $w - $c + 13, $d + 4],
                            [$h + $w - $c + 13, $d + $h + 17],
                            [$h + 13, $d + $h + 17],
                            [$h + 13, $d + 4],
                            [0, $d + 4],
                            [0, 2],
                            [$h + 13, 2]
                        ];
                    } elseif ((($l - $d + 2) + ($c + 2)) > 147 && $w + 2 > 147) {
                        // p10
                        return [
                            [$h + 13, 2],
                            [$h + 13, 0],
                            [$h + 14, 0],
                            [$h + 14, 1],
                            [$h + $w + 15, 1],
                            [$h + $w + 15, 2],
                            [$h * 2 + $w + 28, 2],
                            [2 * $h + 28 + $w, 0],
                            [4 * $h + 57 + $w, 0],
                            [4 * $h + 57 + $w, $l - $d + 1],
                            [4 * $h + 59 + $w, $l - $d + 1],
                            [4 * $h + 59 + $w, 0],
                            [4 * $h + 61 + $w * 2, 0],
                            [4 * $h + 61 + $w * 2, $h + 14],
                            [4 * $h + 60 + $w, $h + 14],
                            [4 * $h + 60 + $w, $h + 15],
                            [4 * $h + 59 + $w, $h + 15],
                            [4 * $h + 59 + $w, 0],
                            [4 * $h + 59 + $w, $l - $d + 2],
                            [3 * $h + 43 + $w, $l - $d + 2],
                            [3 * $h + 43 + $w, 0],
                            [3 * $h + 42 + $w, 0],
                            [3 * $h + 42 + $w, $c + 1],
                            [3 * $h + 43 + $w, $c + 1],
                            [3 * $h + 43 + $w, $c + 2],
                            [2 * $h + 28 + $w, $c + 2],
                            [2 * $h + 28 + $w, 2],
                            [$h * 2 + $w + 28, $l + 4],
                            [$h + $w + 15, $l + 4],
                            [$h + $w + 15, $l + 6],
                            [$h + $w + 14, $l + 6],
                            [$h + $w + 14, $l + 5],
                            [$h + $w - $c + 13, $l + 5],
                            [$h + $w - $c + 13, $d + 4],
                            [
                                $h + $w - $c + 13,
                                $d + $h + 17
                            ],
                            [$h + 13, $d + $h + 17],
                            [$h + 13, $d + 4],
                            [0, $d + 4],
                            [0, 2],
                            [$h + 13, 2]
                        ];
                    }
                } elseif ($l + $h + 26 + 2 > 147 && $l + 2 > 147) {
                    //                    throw new \Exception('你提供的尺寸暂时无法定做！');
                }
            }
        }
        throw new \Exception('你提供的尺寸暂时无法定做！');
    }
}
